Code Supplement to "The Twitter effect: How anti-regulation organizations drive firearm acquisitions in the United States."

The following repository contains the time series data and source code for all analysis reported in [1]. 

-Daily tweet and media counts for each category from 2012-01-01 are listed in gun_data/raw/\*.np, where the filenames correspond to individual variables considered in the study, as follows:
 media_regulation.np <---> News articles (firearm laws & regulations)
 media_shootings.np <---> News articles (mass shootings)
 media_violence.np <---> News articles (violent crime)
 users_count_daily_proreg.np <---> Number of tweets per day (pro-regulation organizations)
 users_count_daily_antireg.np <---> Number of tweets per day (anti-regulation organizations)
 
For each organization listed in the paper, the number of tweets per day was obtained using the twarc command:
twarc2 "from:$ORGNAME" gun --start-time=2012-01-01 --end-time=2020-01-01 --granularity=day --archive counts_$ORGNAME.jsonl

However, note that this command will no longer work due to the recent shutdown of the Twitter Academic Research API, and we are likely prohibited from redistributing or retaining the original count data for the same reason.  Hence, only tweet counts aggregated by user category are reported here; they are sufficient to reproduce the results of the paper.  All proquest API searches were conducted using the included selenium script test_proquestsearch.py.  It required several iterations to complete an entire search, and an account and institutional subscription to ProQuest is required.  Users will also need to interact with the script manually twice; once to accept cookies and once to select the start date of the search.

The deseasonalization of the resulting time series was performed using the included deseas.R routine, which runs automatically on the whole directory and appends a suffix to the data. Subsequently, run_pcmci.py reproduces the causal diagram that comprises the central result of the paper.  It depends on the tigramite package, which can be obtained via github or pip and expects the directory structure and file naming convention generated by the previous stage.

# How to cite


[1] Kevin Daley, Kevin Slote, Rayan Succar, Roni Barak Ventura, Maurizio Porfiri, and igor Belykh.  "The Twitter effect: How anti-regulation organizations drive firearm acquisitions in the United States."  Manuscript submitted; 2023. DOI: 10.5281/zenodo.10631566
